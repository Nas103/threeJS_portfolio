import{a as Q,c as Qe,_ as Je}from"./Preload-b8P7zbUr.js";import{r as p,al as it,i as S,z as at,Y as ve,W as xe,V as k,am as Ue,an as Se,ao as rt,ap as ct,aq as de,ar as he,a1 as Ve,as as Xe,j as ke}from"./index-3pSG0sUZ.js";const Me=new S,Ye=new S,lt=new S,Ke=new k;function ut(s,n,i){const e=Me.setFromMatrixPosition(s.matrixWorld);e.project(n);const f=i.width/2,b=i.height/2;return[e.x*f+f,-(e.y*b)+b]}function dt(s,n){const i=Me.setFromMatrixPosition(s.matrixWorld),e=Ye.setFromMatrixPosition(n.matrixWorld),f=i.sub(e),b=n.getWorldDirection(lt);return f.angleTo(b)>Math.PI/2}function ht(s,n,i,e){const f=Me.setFromMatrixPosition(s.matrixWorld),b=f.clone();b.project(n),Ke.set(b.x,b.y),i.setFromCamera(Ke,n);const v=i.intersectObjects(e,!0);if(v.length){const c=v[0].distance;return f.distanceTo(i.ray.origin)<c}return!0}function ft(s,n){if(n instanceof ve)return n.zoom;if(n instanceof xe){const i=Me.setFromMatrixPosition(s.matrixWorld),e=Ye.setFromMatrixPosition(n.matrixWorld),f=n.fov*Math.PI/180,b=i.distanceTo(e);return 1/(2*Math.tan(f/2)*b)}else return 1}function mt(s,n,i){if(n instanceof xe||n instanceof ve){const e=Me.setFromMatrixPosition(s.matrixWorld),f=Ye.setFromMatrixPosition(n.matrixWorld),b=e.distanceTo(f),v=(i[1]-i[0])/(n.far-n.near),c=i[1]-v*n.far;return Math.round(v*b+c)}}const Fe=s=>Math.abs(s)<1e-10?0:s;function et(s,n,i=""){let e="matrix3d(";for(let f=0;f!==16;f++)e+=Fe(n[f]*s.elements[f])+(f!==15?",":")");return i+e}const pt=(s=>n=>et(n,s))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),bt=(s=>(n,i)=>et(n,s(i),"translate(-50%,-50%)"))(s=>[1/s,1/s,1/s,1,-1/s,-1/s,-1/s,-1,1/s,1/s,1/s,1,1,1,1,1]);function gt(s){return s&&typeof s=="object"&&"current"in s}const yt=p.forwardRef(({children:s,eps:n=.001,style:i,className:e,prepend:f,center:b,fullscreen:v,portal:c,distanceFactor:h,sprite:R=!1,transform:l=!1,occlude:u,onOcclude:O,castShadow:I,receiveShadow:F,material:Y,geometry:_,zIndexRange:A=[16777271,0],calculatePosition:C=ut,as:H="div",wrapperClass:L,pointerEvents:E="auto",...d},J)=>{const{gl:D,camera:P,scene:m,size:x,raycaster:Le,events:X,viewport:fe}=Q(),[w]=p.useState(()=>document.createElement(H)),re=p.useRef(),T=p.useRef(null),K=p.useRef(0),ee=p.useRef([0,0]),W=p.useRef(null),se=p.useRef(null),$=(c==null?void 0:c.current)||X.connected||D.domElement.parentNode,N=p.useRef(null),ie=p.useRef(!1),ce=p.useMemo(()=>u&&u!=="blending"||Array.isArray(u)&&u.length&&gt(u[0]),[u]);p.useLayoutEffect(()=>{const j=D.domElement;u&&u==="blending"?(j.style.zIndex=`${Math.floor(A[0]/2)}`,j.style.position="absolute",j.style.pointerEvents="none"):(j.style.zIndex=null,j.style.position=null,j.style.pointerEvents=null)},[u]),p.useLayoutEffect(()=>{if(T.current){const j=re.current=it.createRoot(w);if(m.updateMatrixWorld(),l)w.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const y=C(T.current,P,x);w.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${y[0]}px,${y[1]}px,0);transform-origin:0 0;`}return $&&(f?$.prepend(w):$.appendChild(w)),()=>{$&&$.removeChild(w),j.unmount()}}},[$,l]),p.useLayoutEffect(()=>{L&&(w.className=L)},[L]);const me=p.useMemo(()=>l?{position:"absolute",top:0,left:0,width:x.width,height:x.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:b?"translate3d(-50%,-50%,0)":"none",...v&&{top:-x.height/2,left:-x.width/2,width:x.width,height:x.height},...i},[i,b,v,x,l]),De=p.useMemo(()=>({position:"absolute",pointerEvents:E}),[E]);p.useLayoutEffect(()=>{if(ie.current=!1,l){var j;(j=re.current)==null||j.render(p.createElement("div",{ref:W,style:me},p.createElement("div",{ref:se,style:De},p.createElement("div",{ref:J,className:e,style:i,children:s}))))}else{var y;(y=re.current)==null||y.render(p.createElement("div",{ref:J,style:me,className:e,children:s}))}});const te=p.useRef(!0);Qe(j=>{if(T.current){P.updateMatrixWorld(),T.current.updateWorldMatrix(!0,!1);const y=l?ee.current:C(T.current,P,x);if(l||Math.abs(K.current-P.zoom)>n||Math.abs(ee.current[0]-y[0])>n||Math.abs(ee.current[1]-y[1])>n){const Z=dt(T.current,P);let z=!1;ce&&(Array.isArray(u)?z=u.map(U=>U.current):u!=="blending"&&(z=[m]));const ne=te.current;if(z){const U=ht(T.current,P,Le,z);te.current=U&&!Z}else te.current=!Z;ne!==te.current&&(O?O(!te.current):w.style.display=te.current?"block":"none");const le=Math.floor(A[0]/2),Re=u?ce?[A[0],le]:[le-1,0]:A;if(w.style.zIndex=`${mt(T.current,P,Re)}`,l){const[U,pe]=[x.width/2,x.height/2],ue=P.projectionMatrix.elements[5]*pe,{isOrthographicCamera:we,top:Ie,left:Te,bottom:be,right:ae}=P,_e=pt(P.matrixWorldInverse),Ce=we?`scale(${ue})translate(${Fe(-(ae+Te)/2)}px,${Fe((Ie+be)/2)}px)`:`translateZ(${ue}px)`;let V=T.current.matrixWorld;R&&(V=P.matrixWorldInverse.clone().transpose().copyPosition(V).scale(T.current.scale),V.elements[3]=V.elements[7]=V.elements[11]=0,V.elements[15]=1),w.style.width=x.width+"px",w.style.height=x.height+"px",w.style.perspective=we?"":`${ue}px`,W.current&&se.current&&(W.current.style.transform=`${Ce}${_e}translate(${U}px,${pe}px)`,se.current.style.transform=bt(V,1/((h||10)/400)))}else{const U=h===void 0?1:ft(T.current,P)*h;w.style.transform=`translate3d(${y[0]}px,${y[1]}px,0) scale(${U})`}ee.current=y,K.current=P.zoom}}if(!ce&&N.current&&!ie.current)if(l){if(W.current){const y=W.current.children[0];if(y!=null&&y.clientWidth&&y!=null&&y.clientHeight){const{isOrthographicCamera:Z}=P;if(Z||_)d.scale&&(Array.isArray(d.scale)?d.scale instanceof S?N.current.scale.copy(d.scale.clone().divideScalar(1)):N.current.scale.set(1/d.scale[0],1/d.scale[1],1/d.scale[2]):N.current.scale.setScalar(1/d.scale));else{const z=(h||10)/400,ne=y.clientWidth*z,le=y.clientHeight*z;N.current.scale.set(ne,le,1)}ie.current=!0}}}else{const y=w.children[0];if(y!=null&&y.clientWidth&&y!=null&&y.clientHeight){const Z=1/fe.factor,z=y.clientWidth*Z,ne=y.clientHeight*Z;N.current.scale.set(z,ne,1),ie.current=!0}N.current.lookAt(j.camera.position)}});const Oe=p.useMemo(()=>({vertexShader:l?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[l]);return p.createElement("group",Je({},d,{ref:T}),u&&!ce&&p.createElement("mesh",{castShadow:I,receiveShadow:F,ref:N},_||p.createElement("planeGeometry",null),Y||p.createElement("shaderMaterial",{side:at,vertexShader:Oe.vertexShader,fragmentShader:Oe.fragmentShader})))}),$e=s=>{let n;const i=new Set,e=(R,l)=>{const u=typeof R=="function"?R(n):R;if(!Object.is(u,n)){const O=n;n=l??(typeof u!="object"||u===null)?u:Object.assign({},n,u),i.forEach(I=>I(n,O))}},f=()=>n,c={setState:e,getState:f,getInitialState:()=>h,subscribe:R=>(i.add(R),()=>i.delete(R))},h=n=s(e,f,c);return c},Et=s=>s?$e(s):$e,Pt=s=>s;function vt(s,n=Pt){const i=Ue.useSyncExternalStore(s.subscribe,()=>n(s.getState()),()=>n(s.getInitialState()));return Ue.useDebugValue(i),i}const Be=s=>{const n=Et(s),i=e=>vt(n,e);return Object.assign(i,n),i},xt=s=>s?Be(s):Be;let Pe=0;const Mt=xt(s=>(Se.onStart=(n,i,e)=>{s({active:!0,item:n,loaded:i,total:e,progress:(i-Pe)/(e-Pe)*100})},Se.onLoad=()=>{s({active:!1})},Se.onError=n=>s(i=>({errors:[...i.errors,n]})),Se.onProgress=(n,i,e)=>{i===e&&(Pe=e),s({active:!0,item:n,loaded:i,total:e,progress:(i-Pe)/(e-Pe)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));var Ot=Object.defineProperty,wt=(s,n,i)=>n in s?Ot(s,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[n]=i,Tt=(s,n,i)=>(wt(s,n+"",i),i);class jt{constructor(){Tt(this,"_listeners")}addEventListener(n,i){this._listeners===void 0&&(this._listeners={});const e=this._listeners;e[n]===void 0&&(e[n]=[]),e[n].indexOf(i)===-1&&e[n].push(i)}hasEventListener(n,i){if(this._listeners===void 0)return!1;const e=this._listeners;return e[n]!==void 0&&e[n].indexOf(i)!==-1}removeEventListener(n,i){if(this._listeners===void 0)return;const f=this._listeners[n];if(f!==void 0){const b=f.indexOf(i);b!==-1&&f.splice(b,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const e=this._listeners[n.type];if(e!==void 0){n.target=this;const f=e.slice(0);for(let b=0,v=f.length;b<v;b++)f[b].call(this,n);n.target=null}}}var St=Object.defineProperty,At=(s,n,i)=>n in s?St(s,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[n]=i,a=(s,n,i)=>(At(s,typeof n!="symbol"?n+"":n,i),i);const Ae=new rt,qe=new ct,Lt=Math.cos(70*(Math.PI/180)),Ge=(s,n)=>(s%n+n)%n;let Dt=class extends jt{constructor(n,i){super(),a(this,"object"),a(this,"domElement"),a(this,"enabled",!0),a(this,"target",new S),a(this,"minDistance",0),a(this,"maxDistance",1/0),a(this,"minZoom",0),a(this,"maxZoom",1/0),a(this,"minPolarAngle",0),a(this,"maxPolarAngle",Math.PI),a(this,"minAzimuthAngle",-1/0),a(this,"maxAzimuthAngle",1/0),a(this,"enableDamping",!1),a(this,"dampingFactor",.05),a(this,"enableZoom",!0),a(this,"zoomSpeed",1),a(this,"enableRotate",!0),a(this,"rotateSpeed",1),a(this,"enablePan",!0),a(this,"panSpeed",1),a(this,"screenSpacePanning",!0),a(this,"keyPanSpeed",7),a(this,"zoomToCursor",!1),a(this,"autoRotate",!1),a(this,"autoRotateSpeed",2),a(this,"reverseOrbit",!1),a(this,"reverseHorizontalOrbit",!1),a(this,"reverseVerticalOrbit",!1),a(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),a(this,"mouseButtons",{LEFT:de.ROTATE,MIDDLE:de.DOLLY,RIGHT:de.PAN}),a(this,"touches",{ONE:he.ROTATE,TWO:he.DOLLY_PAN}),a(this,"target0"),a(this,"position0"),a(this,"zoom0"),a(this,"_domElementKeyEvents",null),a(this,"getPolarAngle"),a(this,"getAzimuthalAngle"),a(this,"setPolarAngle"),a(this,"setAzimuthalAngle"),a(this,"getDistance"),a(this,"getZoomScale"),a(this,"listenToKeyEvents"),a(this,"stopListenToKeyEvents"),a(this,"saveState"),a(this,"reset"),a(this,"update"),a(this,"connect"),a(this,"dispose"),a(this,"dollyIn"),a(this,"dollyOut"),a(this,"getScale"),a(this,"setScale"),this.object=n,this.domElement=i,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>l.phi,this.getAzimuthalAngle=()=>l.theta,this.setPolarAngle=t=>{let o=Ge(t,2*Math.PI),r=l.phi;r<0&&(r+=2*Math.PI),o<0&&(o+=2*Math.PI);let g=Math.abs(o-r);2*Math.PI-g<g&&(o<r?o+=2*Math.PI:r+=2*Math.PI),u.phi=o-r,e.update()},this.setAzimuthalAngle=t=>{let o=Ge(t,2*Math.PI),r=l.theta;r<0&&(r+=2*Math.PI),o<0&&(o+=2*Math.PI);let g=Math.abs(o-r);2*Math.PI-g<g&&(o<r?o+=2*Math.PI:r+=2*Math.PI),u.theta=o-r,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",Ne),this._domElementKeyEvents=t},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ne),this._domElementKeyEvents=null},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(f),e.update(),h=c.NONE},this.update=(()=>{const t=new S,o=new S(0,1,0),r=new Ve().setFromUnitVectors(n.up,o),g=r.clone().invert(),M=new S,B=new Ve,oe=2*Math.PI;return function(){const Ze=e.object.position;r.setFromUnitVectors(n.up,o),g.copy(r).invert(),t.copy(Ze).sub(e.target),t.applyQuaternion(r),l.setFromVector3(t),e.autoRotate&&h===c.NONE&&fe(Le()),e.enableDamping?(l.theta+=u.theta*e.dampingFactor,l.phi+=u.phi*e.dampingFactor):(l.theta+=u.theta,l.phi+=u.phi);let q=e.minAzimuthAngle,G=e.maxAzimuthAngle;isFinite(q)&&isFinite(G)&&(q<-Math.PI?q+=oe:q>Math.PI&&(q-=oe),G<-Math.PI?G+=oe:G>Math.PI&&(G-=oe),q<=G?l.theta=Math.max(q,Math.min(G,l.theta)):l.theta=l.theta>(q+G)/2?Math.max(q,l.theta):Math.min(G,l.theta)),l.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,l.phi)),l.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(I,e.dampingFactor):e.target.add(I),e.zoomToCursor&&P||e.object.isOrthographicCamera?l.radius=N(l.radius):l.radius=N(l.radius*O),t.setFromSpherical(l),t.applyQuaternion(g),Ze.copy(e.target).add(t),e.object.matrixAutoUpdate||e.object.updateMatrix(),e.object.lookAt(e.target),e.enableDamping===!0?(u.theta*=1-e.dampingFactor,u.phi*=1-e.dampingFactor,I.multiplyScalar(1-e.dampingFactor)):(u.set(0,0,0),I.set(0,0,0));let ge=!1;if(e.zoomToCursor&&P){let ye=null;if(e.object instanceof xe&&e.object.isPerspectiveCamera){const Ee=t.length();ye=N(Ee*O);const je=Ee-ye;e.object.position.addScaledVector(J,je),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const Ee=new S(D.x,D.y,0);Ee.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/O)),e.object.updateProjectionMatrix(),ge=!0;const je=new S(D.x,D.y,0);je.unproject(e.object),e.object.position.sub(je).add(Ee),e.object.updateMatrixWorld(),ye=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;ye!==null&&(e.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(ye).add(e.object.position):(Ae.origin.copy(e.object.position),Ae.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(Ae.direction))<Lt?n.lookAt(e.target):(qe.setFromNormalAndCoplanarPoint(e.object.up,e.target),Ae.intersectPlane(qe,e.target))))}else e.object instanceof ve&&e.object.isOrthographicCamera&&(ge=O!==1,ge&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/O)),e.object.updateProjectionMatrix()));return O=1,P=!1,ge||M.distanceToSquared(e.object.position)>R||8*(1-B.dot(e.object.quaternion))>R?(e.dispatchEvent(f),M.copy(e.object.position),B.copy(e.object.quaternion),ge=!1,!0):!1}})(),this.connect=t=>{e.domElement=t,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",He),e.domElement.addEventListener("pointerdown",Te),e.domElement.addEventListener("pointercancel",ae),e.domElement.addEventListener("wheel",V)},this.dispose=()=>{var t,o,r,g,M,B;e.domElement&&(e.domElement.style.touchAction="auto"),(t=e.domElement)==null||t.removeEventListener("contextmenu",He),(o=e.domElement)==null||o.removeEventListener("pointerdown",Te),(r=e.domElement)==null||r.removeEventListener("pointercancel",ae),(g=e.domElement)==null||g.removeEventListener("wheel",V),(M=e.domElement)==null||M.ownerDocument.removeEventListener("pointermove",be),(B=e.domElement)==null||B.ownerDocument.removeEventListener("pointerup",ae),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",Ne)};const e=this,f={type:"change"},b={type:"start"},v={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=c.NONE;const R=1e-6,l=new Xe,u=new Xe;let O=1;const I=new S,F=new k,Y=new k,_=new k,A=new k,C=new k,H=new k,L=new k,E=new k,d=new k,J=new S,D=new k;let P=!1;const m=[],x={};function Le(){return 2*Math.PI/60/60*e.autoRotateSpeed}function X(){return Math.pow(.95,e.zoomSpeed)}function fe(t){e.reverseOrbit||e.reverseHorizontalOrbit?u.theta+=t:u.theta-=t}function w(t){e.reverseOrbit||e.reverseVerticalOrbit?u.phi+=t:u.phi-=t}const re=(()=>{const t=new S;return function(r,g){t.setFromMatrixColumn(g,0),t.multiplyScalar(-r),I.add(t)}})(),T=(()=>{const t=new S;return function(r,g){e.screenSpacePanning===!0?t.setFromMatrixColumn(g,1):(t.setFromMatrixColumn(g,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(r),I.add(t)}})(),K=(()=>{const t=new S;return function(r,g){const M=e.domElement;if(M&&e.object instanceof xe&&e.object.isPerspectiveCamera){const B=e.object.position;t.copy(B).sub(e.target);let oe=t.length();oe*=Math.tan(e.object.fov/2*Math.PI/180),re(2*r*oe/M.clientHeight,e.object.matrix),T(2*g*oe/M.clientHeight,e.object.matrix)}else M&&e.object instanceof ve&&e.object.isOrthographicCamera?(re(r*(e.object.right-e.object.left)/e.object.zoom/M.clientWidth,e.object.matrix),T(g*(e.object.top-e.object.bottom)/e.object.zoom/M.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function ee(t){e.object instanceof xe&&e.object.isPerspectiveCamera||e.object instanceof ve&&e.object.isOrthographicCamera?O=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function W(t){ee(O/t)}function se(t){ee(O*t)}function $(t){if(!e.zoomToCursor||!e.domElement)return;P=!0;const o=e.domElement.getBoundingClientRect(),r=t.clientX-o.left,g=t.clientY-o.top,M=o.width,B=o.height;D.x=r/M*2-1,D.y=-(g/B)*2+1,J.set(D.x,D.y,1).unproject(e.object).sub(e.object.position).normalize()}function N(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function ie(t){F.set(t.clientX,t.clientY)}function ce(t){$(t),L.set(t.clientX,t.clientY)}function me(t){A.set(t.clientX,t.clientY)}function De(t){Y.set(t.clientX,t.clientY),_.subVectors(Y,F).multiplyScalar(e.rotateSpeed);const o=e.domElement;o&&(fe(2*Math.PI*_.x/o.clientHeight),w(2*Math.PI*_.y/o.clientHeight)),F.copy(Y),e.update()}function te(t){E.set(t.clientX,t.clientY),d.subVectors(E,L),d.y>0?W(X()):d.y<0&&se(X()),L.copy(E),e.update()}function Oe(t){C.set(t.clientX,t.clientY),H.subVectors(C,A).multiplyScalar(e.panSpeed),K(H.x,H.y),A.copy(C),e.update()}function j(t){$(t),t.deltaY<0?se(X()):t.deltaY>0&&W(X()),e.update()}function y(t){let o=!1;switch(t.code){case e.keys.UP:K(0,e.keyPanSpeed),o=!0;break;case e.keys.BOTTOM:K(0,-e.keyPanSpeed),o=!0;break;case e.keys.LEFT:K(e.keyPanSpeed,0),o=!0;break;case e.keys.RIGHT:K(-e.keyPanSpeed,0),o=!0;break}o&&(t.preventDefault(),e.update())}function Z(){if(m.length==1)F.set(m[0].pageX,m[0].pageY);else{const t=.5*(m[0].pageX+m[1].pageX),o=.5*(m[0].pageY+m[1].pageY);F.set(t,o)}}function z(){if(m.length==1)A.set(m[0].pageX,m[0].pageY);else{const t=.5*(m[0].pageX+m[1].pageX),o=.5*(m[0].pageY+m[1].pageY);A.set(t,o)}}function ne(){const t=m[0].pageX-m[1].pageX,o=m[0].pageY-m[1].pageY,r=Math.sqrt(t*t+o*o);L.set(0,r)}function le(){e.enableZoom&&ne(),e.enablePan&&z()}function Re(){e.enableZoom&&ne(),e.enableRotate&&Z()}function U(t){if(m.length==1)Y.set(t.pageX,t.pageY);else{const r=ze(t),g=.5*(t.pageX+r.x),M=.5*(t.pageY+r.y);Y.set(g,M)}_.subVectors(Y,F).multiplyScalar(e.rotateSpeed);const o=e.domElement;o&&(fe(2*Math.PI*_.x/o.clientHeight),w(2*Math.PI*_.y/o.clientHeight)),F.copy(Y)}function pe(t){if(m.length==1)C.set(t.pageX,t.pageY);else{const o=ze(t),r=.5*(t.pageX+o.x),g=.5*(t.pageY+o.y);C.set(r,g)}H.subVectors(C,A).multiplyScalar(e.panSpeed),K(H.x,H.y),A.copy(C)}function ue(t){const o=ze(t),r=t.pageX-o.x,g=t.pageY-o.y,M=Math.sqrt(r*r+g*g);E.set(0,M),d.set(0,Math.pow(E.y/L.y,e.zoomSpeed)),W(d.y),L.copy(E)}function we(t){e.enableZoom&&ue(t),e.enablePan&&pe(t)}function Ie(t){e.enableZoom&&ue(t),e.enableRotate&&U(t)}function Te(t){var o,r;e.enabled!==!1&&(m.length===0&&((o=e.domElement)==null||o.ownerDocument.addEventListener("pointermove",be),(r=e.domElement)==null||r.ownerDocument.addEventListener("pointerup",ae)),ot(t),t.pointerType==="touch"?tt(t):_e(t))}function be(t){e.enabled!==!1&&(t.pointerType==="touch"?nt(t):Ce(t))}function ae(t){var o,r,g;st(t),m.length===0&&((o=e.domElement)==null||o.releasePointerCapture(t.pointerId),(r=e.domElement)==null||r.ownerDocument.removeEventListener("pointermove",be),(g=e.domElement)==null||g.ownerDocument.removeEventListener("pointerup",ae)),e.dispatchEvent(v),h=c.NONE}function _e(t){let o;switch(t.button){case 0:o=e.mouseButtons.LEFT;break;case 1:o=e.mouseButtons.MIDDLE;break;case 2:o=e.mouseButtons.RIGHT;break;default:o=-1}switch(o){case de.DOLLY:if(e.enableZoom===!1)return;ce(t),h=c.DOLLY;break;case de.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;me(t),h=c.PAN}else{if(e.enableRotate===!1)return;ie(t),h=c.ROTATE}break;case de.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;ie(t),h=c.ROTATE}else{if(e.enablePan===!1)return;me(t),h=c.PAN}break;default:h=c.NONE}h!==c.NONE&&e.dispatchEvent(b)}function Ce(t){if(e.enabled!==!1)switch(h){case c.ROTATE:if(e.enableRotate===!1)return;De(t);break;case c.DOLLY:if(e.enableZoom===!1)return;te(t);break;case c.PAN:if(e.enablePan===!1)return;Oe(t);break}}function V(t){e.enabled===!1||e.enableZoom===!1||h!==c.NONE&&h!==c.ROTATE||(t.preventDefault(),e.dispatchEvent(b),j(t),e.dispatchEvent(v))}function Ne(t){e.enabled===!1||e.enablePan===!1||y(t)}function tt(t){switch(We(t),m.length){case 1:switch(e.touches.ONE){case he.ROTATE:if(e.enableRotate===!1)return;Z(),h=c.TOUCH_ROTATE;break;case he.PAN:if(e.enablePan===!1)return;z(),h=c.TOUCH_PAN;break;default:h=c.NONE}break;case 2:switch(e.touches.TWO){case he.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;le(),h=c.TOUCH_DOLLY_PAN;break;case he.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Re(),h=c.TOUCH_DOLLY_ROTATE;break;default:h=c.NONE}break;default:h=c.NONE}h!==c.NONE&&e.dispatchEvent(b)}function nt(t){switch(We(t),h){case c.TOUCH_ROTATE:if(e.enableRotate===!1)return;U(t),e.update();break;case c.TOUCH_PAN:if(e.enablePan===!1)return;pe(t),e.update();break;case c.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;we(t),e.update();break;case c.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ie(t),e.update();break;default:h=c.NONE}}function He(t){e.enabled!==!1&&t.preventDefault()}function ot(t){m.push(t)}function st(t){delete x[t.pointerId];for(let o=0;o<m.length;o++)if(m[o].pointerId==t.pointerId){m.splice(o,1);return}}function We(t){let o=x[t.pointerId];o===void 0&&(o=new k,x[t.pointerId]=o),o.set(t.pageX,t.pageY)}function ze(t){const o=t.pointerId===m[0].pointerId?m[1]:m[0];return x[o.pointerId]}this.dollyIn=(t=X())=>{se(t),e.update()},this.dollyOut=(t=X())=>{W(t),e.update()},this.getScale=()=>O,this.setScale=t=>{ee(t),e.update()},this.getZoomScale=()=>X(),i!==void 0&&this.connect(i),this.update()}};const Nt=p.forwardRef(({makeDefault:s,camera:n,regress:i,domElement:e,enableDamping:f=!0,keyEvents:b=!1,onChange:v,onStart:c,onEnd:h,...R},l)=>{const u=Q(d=>d.invalidate),O=Q(d=>d.camera),I=Q(d=>d.gl),F=Q(d=>d.events),Y=Q(d=>d.setEvents),_=Q(d=>d.set),A=Q(d=>d.get),C=Q(d=>d.performance),H=n||O,L=e||F.connected||I.domElement,E=p.useMemo(()=>new Dt(H),[H]);return Qe(()=>{E.enabled&&E.update()},-1),p.useEffect(()=>(b&&E.connect(b===!0?L:b),E.connect(L),()=>void E.dispose()),[b,L,i,E,u]),p.useEffect(()=>{const d=P=>{u(),i&&C.regress(),v&&v(P)},J=P=>{c&&c(P)},D=P=>{h&&h(P)};return E.addEventListener("change",d),E.addEventListener("start",J),E.addEventListener("end",D),()=>{E.removeEventListener("start",J),E.removeEventListener("end",D),E.removeEventListener("change",d)}},[v,c,h,E,u,Y]),p.useEffect(()=>{if(s){const d=A().controls;return _({controls:E}),()=>_({controls:d})}},[s,E]),p.createElement("primitive",Je({ref:l,object:E,enableDamping:f},R))}),zt=()=>{const{progress:s}=Mt();return ke.jsxs(yt,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[ke.jsx("span",{className:"canvas-loader"}),ke.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[s.toFixed(2),"%"]})]})};export{zt as C,Nt as O};
