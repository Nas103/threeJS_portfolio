import{E as J,i as E,h as X,ai as L,l as C,r as u,ab as Z,aj as q,H as K,O as Q,X as V,j as d,ak as tt}from"./index-3pSG0sUZ.js";import{a as et,u as F,b as B,_ as ot,c as rt,C as st,P as nt}from"./Preload-b8P7zbUr.js";import{C as at,O as it}from"./Loader-5oCFFnJA.js";import{S as lt}from"./SectionWrapper-DLX7Xbf7.js";class ut extends J{constructor(m,x,f,O){super();const c=[],A=[],T=[],y=new E,g=new X;g.makeRotationFromEuler(f),g.setPosition(x);const z=new X;z.copy(g).invert(),k(),this.setAttribute("position",new L(c,3)),this.setAttribute("normal",new L(A,3)),this.setAttribute("uv",new L(T,2));function k(){let t,e=[];const s=new E,n=new E;if(m.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const o=m.geometry,j=o.attributes.position,h=o.attributes.normal;if(o.index!==null){const i=o.index;for(t=0;t<i.count;t++)s.fromBufferAttribute(j,i.getX(t)),n.fromBufferAttribute(h,i.getX(t)),M(e,s,n)}else for(t=0;t<j.count;t++)s.fromBufferAttribute(j,t),n.fromBufferAttribute(h,t),M(e,s,n);for(e=b(e,y.set(1,0,0)),e=b(e,y.set(-1,0,0)),e=b(e,y.set(0,1,0)),e=b(e,y.set(0,-1,0)),e=b(e,y.set(0,0,1)),e=b(e,y.set(0,0,-1)),t=0;t<e.length;t++){const i=e[t];T.push(.5+i.position.x/O.x,.5+i.position.y/O.y),i.position.applyMatrix4(g),c.push(i.position.x,i.position.y,i.position.z),A.push(i.normal.x,i.normal.y,i.normal.z)}}function M(t,e,s){e.applyMatrix4(m.matrixWorld),e.applyMatrix4(z),s.transformDirection(m.matrixWorld),t.push(new $(e.clone(),s.clone()))}function b(t,e){const s=[],n=.5*Math.abs(O.dot(e));for(let o=0;o<t.length;o+=3){let j,h,i,I=0,l,p,w,D;const P=t[o+0].position.dot(e)-n,R=t[o+1].position.dot(e)-n,G=t[o+2].position.dot(e)-n;switch(j=P>0,h=R>0,i=G>0,I=(j?1:0)+(h?1:0)+(i?1:0),I){case 0:{s.push(t[o]),s.push(t[o+1]),s.push(t[o+2]);break}case 1:{if(j&&(l=t[o+1],p=t[o+2],w=a(t[o],l,e,n),D=a(t[o],p,e,n)),h){l=t[o],p=t[o+2],w=a(t[o+1],l,e,n),D=a(t[o+1],p,e,n),s.push(w),s.push(p.clone()),s.push(l.clone()),s.push(p.clone()),s.push(w.clone()),s.push(D);break}i&&(l=t[o],p=t[o+1],w=a(t[o+2],l,e,n),D=a(t[o+2],p,e,n)),s.push(l.clone()),s.push(p.clone()),s.push(w),s.push(D),s.push(w.clone()),s.push(p.clone());break}case 2:{j||(l=t[o].clone(),p=a(l,t[o+1],e,n),w=a(l,t[o+2],e,n),s.push(l),s.push(p),s.push(w)),h||(l=t[o+1].clone(),p=a(l,t[o+2],e,n),w=a(l,t[o],e,n),s.push(l),s.push(p),s.push(w)),i||(l=t[o+2].clone(),p=a(l,t[o],e,n),w=a(l,t[o+1],e,n),s.push(l),s.push(p),s.push(w));break}}}return s}function a(t,e,s,n){const o=t.position.dot(s)-n,j=e.position.dot(s)-n,h=o/(o-j);return new $(new E(t.position.x+h*(e.position.x-t.position.x),t.position.y+h*(e.position.y-t.position.y),t.position.z+h*(e.position.z-t.position.z)),new E(t.normal.x+h*(e.normal.x-t.normal.x),t.normal.y+h*(e.normal.y-t.normal.y),t.normal.z+h*(e.normal.z-t.normal.z)))}}}class ${constructor(m,x){this.position=m,this.normal=x}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}const S=r=>r===Object(r)&&!Array.isArray(r)&&typeof r!="function";function H(r,m){const x=et(c=>c.gl),f=F(C,S(r)?Object.values(r):r);return u.useLayoutEffect(()=>{m==null||m(f)},[m]),u.useEffect(()=>{if("initTexture"in x){let c=[];Array.isArray(f)?c=f:f instanceof Z?c=[f]:S(f)&&(c=Object.values(f)),c.forEach(A=>{A instanceof Z&&x.initTexture(A)})}},[x,f]),u.useMemo(()=>{if(S(r)){const c={};let A=0;for(const T in r)c[T]=f[A++];return c}else return f},[r,f])}H.preload=r=>F.preload(C,r);H.clear=r=>F.clear(C,r);function ct(r){return Array.isArray(r)}function W(r=[0,0,0]){return ct(r)?r:r instanceof E||r instanceof q?[r.x,r.y,r.z]:[r,r,r]}const ft=u.forwardRef(function({debug:m,depthTest:x=!1,polygonOffsetFactor:f=-10,map:O,mesh:c,children:A,position:T,rotation:y,scale:g,...z},k){const M=u.useRef(null);u.useImperativeHandle(k,()=>M.current);const b=u.useRef(null),a=u.useRef({position:new E,rotation:new q,scale:new E(1,1,1)});return u.useLayoutEffect(()=>{const t=(c==null?void 0:c.current)||M.current.parent,e=M.current;if(!(t instanceof K))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');if(t){B(a.current,{position:T,scale:g});const s=t.matrixWorld.clone();if(t.matrixWorld.identity(),!y||typeof y=="number"){const n=new Q;n.position.copy(a.current.position);const o=t.geometry.attributes.position.array;t.geometry.attributes.normal===void 0&&t.geometry.computeVertexNormals();const j=t.geometry.attributes.normal.array;let h=1/0;new E;let i=new E;const I=n.position.x,l=n.position.y,p=n.position.z,w=o.length;let D=-1;for(let P=0;P<w;P+=3){const R=o[P],G=o[P+1],Y=o[P+2],v=R-I,N=G-l,U=Y-p,_=v*v+N*N+U*U;_<h&&(h=_,D=P)}i.fromArray(j,D),n.lookAt(n.position.clone().add(i)),n.rotateZ(Math.PI),n.rotateY(Math.PI),typeof y=="number"&&n.rotateZ(y),B(a.current,{rotation:n.rotation})}else B(a.current,{rotation:y});return e.geometry=new ut(t,a.current.position,a.current.rotation,a.current.scale),t.matrixWorld=s,()=>{e.geometry.dispose()}}},[c,...W(T),...W(g),...W(y)]),u.useLayoutEffect(()=>{b.current&&(B(b.current,a.current),b.current.traverse(t=>t.raycast=()=>null))},[m]),u.createElement("mesh",ot({ref:M,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":f,"material-depthTest":x,"material-map":O},z),A,m&&u.createElement("mesh",{ref:b},u.createElement("boxGeometry",null),u.createElement("meshNormalMaterial",{wireframe:!0}),u.createElement("axesHelper",null)))}),pt=u.forwardRef(({children:r,enabled:m=!0,speed:x=1,rotationIntensity:f=1,floatIntensity:O=1,floatingRange:c=[-.1,.1],autoInvalidate:A=!1,...T},y)=>{const g=u.useRef(null);u.useImperativeHandle(y,()=>g.current,[]);const z=u.useRef(Math.random()*1e4);return rt(k=>{var M,b;if(!m||x===0)return;A&&k.invalidate();const a=z.current+k.clock.getElapsedTime();g.current.rotation.x=Math.cos(a/4*x)/8*f,g.current.rotation.y=Math.sin(a/4*x)/8*f,g.current.rotation.z=Math.sin(a/4*x)/20*f;let t=Math.sin(a/4*x)/10;t=V.mapLinear(t,-.1,.1,(M=c==null?void 0:c[0])!==null&&M!==void 0?M:-.1,(b=c==null?void 0:c[1])!==null&&b!==void 0?b:.1),g.current.position.y=t*O,g.current.updateMatrix()}),u.createElement("group",T,u.createElement("group",{ref:g,matrixAutoUpdate:!1},r))}),mt=r=>{const[m]=H([r.imgUrl]);return d.jsxs(pt,{speed:1.75,rotationIntensity:1,floatIntensity:2,children:[d.jsx("ambientLight",{intensity:.5}),d.jsx("directionalLight",{position:[0,0,.05],intensity:.8}),d.jsx("pointLight",{position:[10,10,10],intensity:.5}),d.jsxs("mesh",{castShadow:!0,receiveShadow:!0,scale:2.75,children:[d.jsx("icosahedronGeometry",{args:[1,1]}),d.jsx("meshStandardMaterial",{color:"#fff8eb",polygonOffset:!0,polygonOffsetFactor:-5,flatShading:!0,roughness:.2,metalness:.1}),d.jsx(ft,{position:[0,0,1],rotation:[2*Math.PI,0,6.25],scale:1,map:m,flatShading:!0,transparent:!0,opacity:.8,depthTest:!0,depthWrite:!0})]})]})},ht=({icon:r})=>d.jsxs(st,{frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},children:[d.jsxs(u.Suspense,{fallback:d.jsx(at,{}),children:[d.jsx(it,{enableZoom:!1,enablePan:!1,minPolarAngle:Math.PI/2,maxPolarAngle:Math.PI/2}),d.jsx(mt,{imgUrl:r})]}),d.jsx(nt,{all:!0})]}),dt=()=>d.jsx("div",{className:"flex flex-row flex-wrap justify-center gap-10",children:tt.map(r=>d.jsx("div",{className:"w-28 h-28",children:d.jsx(ht,{icon:r.icon})},r.name))}),wt=lt(dt,"");export{wt as default};
